<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8' />
    <title></title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.24.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.24.0/mapbox-gl.css' rel='stylesheet' />
    <style>
        body { margin:0; padding:0; }
        #map { position:absolute; top:0; bottom:0; width:100%; }
    </style>
</head>
<body>

<script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-compare/v0.0.1/mapbox-gl-compare.js'></script>
<link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-compare/v0.0.1/mapbox-gl-compare.css' type='text/css' />
<script src="https://unpkg.com/mapillary-js@1.7.1/dist/mapillary-js.min.js"></script>
<link rel="stylesheet" href="https://unpkg.com/mapillary-js@1.7.1/dist/mapillary-js.min.css">
<style>
body {
    overflow: hidden;
}

body * {
   -webkit-touch-callout: none;
     -webkit-user-select: none;
        -moz-user-select: none;
         -ms-user-select: none;
             user-select: none;
}

.map {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 100%;
}
</style>

<div id='before' class='map'></div>
<div id='after' class='map'></div>

<script>
mapboxgl.accessToken = 'pk.eyJ1IjoiY2JlZGRvdyIsImEiOiI5Q09YRG1RIn0.Izu6OPJ4CEEaSSpGuys3Xg';
var beforeMap = new mapboxgl.Map({
    container: 'before',
    style: 'mapbox://styles/mapbox/light-v9',
    center: [0, 42],
    zoom: 1
});

beforeMap.on('load', function () {
  beforeMap.addSource('google', {
    type: 'raster',
    tiles: ['https://mts1.googleapis.com/vt?hl=en-US&lyrs=svv|cb_client:apiv3&style=40,8&x={x}&y={y}&z={z}'],
    minZoom: 0,
    maxZoom: 16
  });
  beforeMap.addLayer({
    id: 'google',
    source: 'google',
    type: 'raster'
  });
});

var afterMap = new mapboxgl.Map({
    container: 'after',
    style: 'mapbox://styles/mapbox/dark-v9',
    center: [0, 42],
    zoom: 1
});

afterMap.on('load', function () {
    afterMap.addSource('mapillary', {
        type: 'vector',
        tiles: ['https://d2munx5tg0hw47.cloudfront.net/tiles/{z}/{x}/{y}.mapbox'],
             minzoom: 0,
             maxzoom: 16
    });
    afterMap.addLayer({
          'id': 'mapillary',
          'type': 'line',
          'source': 'mapillary',
          'source-layer': 'mapillary-sequences',
          'layout': {
                'line-cap': 'round',
                'line-join': 'round'
                     },
          'paint': {
                'line-opacity': 0.6,
                'line-color':   'rgb(53, 175, 109)',
                'line-width':   2
               }
          });
});
var nav1 = new mapboxgl.Navigation({position: 'top-left'}); // position is optional
beforeMap.addControl(nav1);

var map = new mapboxgl.Compare(beforeMap, afterMap);
</script>

</body>
</html>
